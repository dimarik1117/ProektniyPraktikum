import telebot
import requests
from telebot import types

token = "5973246476:AAGXWO9c8R74NC9uUjtCSegNwPoB4Qr6UkE"
bot = telebot.TeleBot(token)


@bot.message_handler(commands=['start'])
def start(message):
    keyboard = types.ReplyKeyboardMarkup()
    keyboard.row("/start", "/help")
    keyboard.row("/weather", "/news", "/horoscope")
    bot.send_message(message.chat.id, '–î–æ–±—Ä—ã–π –¥–µ–Ω—å!‚òÄ –ß—Ç–æ –í–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç —Å–µ–≥–æ–¥–Ω—è?üì±'
                                      '\n–ö–æ–º–∞–Ω–¥–∞ /help —Ä–∞—Å—Å–∫–∞–∂–µ—Ç –ø—Ä–æ –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã, –∫–æ—Ç–æ—Ä—ã–º–∏ —è –≤–ª–∞–¥–µ—éüëæ',
                     reply_markup=keyboard)


@bot.message_handler(commands=['help'])
def start_message(message):
    bot.send_message(message.chat.id, '–í–æ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –º–æ–∏—Ö –∫–æ–º–∞–Ω–¥:'
                                      '\n/start - –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –∫ –Ω–∞—á–∞–ª—å–Ω–æ–º—É —Å–æ–æ–±—â–µ–Ω–∏—éü§ñ'
                                      '\n/weather - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é –ø–æ–≥–æ–¥—É –≤ –≤–∞—à–µ–º –≥–æ—Ä–æ–¥–µ‚õÖ'
                                      '\n/news - –≤—ã–≤–æ–¥–∏—Ç –Ω–æ–≤–æ—Å—Ç–Ω—ã–µ —Å–∞–π—Ç—ã –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–µ–º—ãüíª'
                                      '\n/horoscope - –≤—ã–≤–æ–¥–∏—Ç –≥–æ—Ä–æ—Å–∫–æ–ø—ã –¥–ª—è –≤—Å–µ—Ö –∑–Ω–∞–∫–æ–≤ –∑–æ–¥–∏–∞–∫–∞üîØ')


@bot.message_handler(commands=['weather'])
def start_message(message):
    keyboard = types.ReplyKeyboardMarkup()
    keyboard.row("/start")
    bot.send_message(message.chat.id, '–ö–∞–∫–æ–π –≥–æ—Ä–æ–¥ –í–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?üèô', reply_markup=keyboard)


@bot.message_handler(commands=['news'])
def start_message(message):
    keyboard = types.ReplyKeyboardMarkup()
    keyboard.row("/start", "‚öΩ–°–ø–æ—Ä—Ç‚öΩ", "üì¢–ü–æ–ª–∏—Ç–∏–∫–∞üì¢")
    keyboard.row("üé¨–ö–∏–Ω–æüé¨", "‚õ©–ê–Ω–∏–º–µ‚õ©", "üéÆ–í–∏–¥–µ–æ–∏–≥—Ä—ãüéÆ")
    bot.send_message(message.chat.id, '–ö–∞–∫–∞—è –∏–∑ –¥–∞–Ω–Ω—ã—Ö —Ç–µ–º –í–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?üñ•', reply_markup=keyboard)


@bot.message_handler(commands=['horoscope'])
def start_message(message):
    keyboard = types.ReplyKeyboardMarkup()
    keyboard.row("/start", "üîØ–û–±—â–∏–πüîØ")
    keyboard.row("‚ôà–û–≤–µ–Ω‚ôà", "‚ôâ–¢–µ–ª–µ—Ü‚ôâ", "‚ôä–ë–ª–∏–∑–Ω–µ—Ü—ã‚ôä")
    keyboard.row("‚ôã–†–∞–∫‚ôã", "‚ôå–õ–µ–≤‚ôå", "‚ôç–î–µ–≤–∞‚ôç")
    keyboard.row("‚ôé–í–µ—Å—ã‚ôé", "‚ôè–°–∫–æ—Ä–ø–∏–æ–Ω‚ôè", "‚ôê–°—Ç—Ä–µ–ª–µ—Ü‚ôê")
    keyboard.row("‚ôë–ö–æ–∑–µ—Ä–æ–≥‚ôë", "‚ôí–í–æ–¥–æ–ª–µ–π‚ôí", "‚ôì–†—ã–±—ã‚ôì")
    bot.send_message(message.chat.id, '–ì–æ—Ä–æ—Å–∫–æ–ø –¥–ª—è –∫–∞–∫–æ–≥–æ –∑–Ω–∞–∫–∞ –∑–æ–¥–∏–∞–∫–∞ –í–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?üîØ', reply_markup=keyboard)


@bot.message_handler(content_types=['text'])
def answer(message):
    if message.text.lower() == '‚öΩ—Å–ø–æ—Ä—Ç‚öΩ':
        bot.send_message(message.chat.id, '–í–∞—à–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å–∞–π—Ç —Å –Ω–æ–≤–æ—Å—Ç—è–º–∏ —Å–ø–æ—Ä—Ç–∞:'
                         '\nhttps://www.sport-express.ru/news/')
    elif message.text.lower() == 'üì¢–ø–æ–ª–∏—Ç–∏–∫–∞üì¢':
        bot.send_message(message.chat.id, '–í–∞—à–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å–∞–π—Ç —Å –Ω–æ–≤–æ—Å—Ç—è–º–∏ –ø–æ–ª–∏—Ç–∏–∫–∏:'
                         '\nhttps://lenta.ru/rubrics/world/politic/2/')
    elif message.text.lower() == 'üé¨–∫–∏–Ω–æüé¨':
        bot.send_message(message.chat.id, '–í–∞—à–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å–∞–π—Ç —Å –Ω–æ–≤–æ—Å—Ç—è–º–∏ –∫–∏–Ω–æ:'
                         '\nhttps://www.playground.ru/news/movies')
    elif message.text.lower() == '‚õ©–∞–Ω–∏–º–µ‚õ©':
        bot.send_message(message.chat.id, '–í–∞—à–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å–∞–π—Ç —Å –Ω–æ–≤–æ—Å—Ç—è–º–∏ –∞–Ω–∏–º–µ:'
                         '\nhttps://animag.ru/news')
    elif message.text.lower() == 'üéÆ–≤–∏–¥–µ–æ–∏–≥—Ä—ãüéÆ':
        bot.send_message(message.chat.id, '–í–∞—à–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å–∞–π—Ç —Å –Ω–æ–≤–æ—Å—Ç—è–º–∏ –≤–∏–¥–µ–æ–∏–≥—Ä:'
                         '\nhttps://stopgame.ru/news')
    elif message.text.lower() == 'üîØ–æ–±—â–∏–πüîØ':
        bot.send_message(message.chat.id, '–í–∞—à–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ–±—â–∏–π –≥–æ—Ä–æ—Å–∫–æ–ø:'
                         '\nhttps://horoscopes.rambler.ru/zodiac/general/all/today/?updated')
    elif message.text.lower() == '‚ôà–æ–≤–µ–Ω‚ôà':
        bot.send_message(message.chat.id, '–í–∞—à–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ –≥–æ—Ä–æ—Å–∫–æ–ø –¥–ª—è –æ–≤–Ω–æ–≤:'
                         '\nhttps://horoscopes.rambler.ru/aries/')
    elif message.text.lower() == '‚ôâ—Ç–µ–ª–µ—Ü‚ôâ':
        bot.send_message(message.chat.id, '–í–∞—à–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ –≥–æ—Ä–æ—Å–∫–æ–ø –¥–ª—è —Ç–µ–ª—å—Ü–æ–≤:'
                         '\nhttps://horoscopes.rambler.ru/taurus/')
    elif message.text.lower() == '‚ôä–±–ª–∏–∑–Ω–µ—Ü—ã‚ôä':
        bot.send_message(message.chat.id, '–í–∞—à–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ –≥–æ—Ä–æ—Å–∫–æ–ø –¥–ª—è –±–ª–∏–∑–Ω–µ—Ü–æ–≤:'
                         '\nhttps://horoscopes.rambler.ru/gemini/')
    elif message.text.lower() == '‚ôã—Ä–∞–∫‚ôã':
        bot.send_message(message.chat.id, '–í–∞—à–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ –≥–æ—Ä–æ—Å–∫–æ–ø –¥–ª—è —Ä–∞–∫–æ–≤:'
                         '\nhttps://horoscopes.rambler.ru/cancer/')
    elif message.text.lower() == '‚ôå–ª–µ–≤‚ôå':
        bot.send_message(message.chat.id, '–í–∞—à–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ –≥–æ—Ä–æ—Å–∫–æ–ø –¥–ª—è –ª—å–≤–æ–≤:'
                         '\nhttps://horoscopes.rambler.ru/leo/')
    elif message.text.lower() == '‚ôç–¥–µ–≤–∞‚ôç':
        bot.send_message(message.chat.id, '–í–∞—à–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ –≥–æ—Ä–æ—Å–∫–æ–ø –¥–ª—è –¥–µ–≤:'
                         '\nhttps://horoscopes.rambler.ru/virgo/')
    elif message.text.lower() == '‚ôé–≤–µ—Å—ã‚ôé':
        bot.send_message(message.chat.id, '–í–∞—à–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ –≥–æ—Ä–æ—Å–∫–æ–ø –¥–ª—è –≤–µ—Å–æ–≤:'
                         '\nhttps://horoscopes.rambler.ru/libra/')
    elif message.text.lower() == '‚ôè—Å–∫–æ—Ä–ø–∏–æ–Ω‚ôè':
        bot.send_message(message.chat.id, '–í–∞—à–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ –≥–æ—Ä–æ—Å–∫–æ–ø –¥–ª—è —Å–∫–æ—Ä–ø–∏–æ–Ω–æ–≤:'
                         '\nhttps://horoscopes.rambler.ru/scorpio/')
    elif message.text.lower() == '‚ôê—Å—Ç—Ä–µ–ª–µ—Ü‚ôê':
        bot.send_message(message.chat.id, '–í–∞—à–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ –≥–æ—Ä–æ—Å–∫–æ–ø –¥–ª—è —Å—Ç—Ä–µ–ª—å—Ü–æ–≤:'
                         '\nhttps://horoscopes.rambler.ru/sagittarius/')
    elif message.text.lower() == '‚ôë–∫–æ–∑–µ—Ä–æ–≥‚ôë':
        bot.send_message(message.chat.id, '–í–∞—à–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ –≥–æ—Ä–æ—Å–∫–æ–ø –¥–ª—è –∫–æ–∑–µ—Ä–æ–≥–æ–≤:'
                         '\nhttps://horoscopes.rambler.ru/capricorn/')
    elif message.text.lower() == '‚ôí–≤–æ–¥–æ–ª–µ–π‚ôí':
        bot.send_message(message.chat.id, '–í–∞—à–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ –≥–æ—Ä–æ—Å–∫–æ–ø –¥–ª—è –≤–æ–¥–æ–ª–µ–µ–≤:'
                         '\nhttps://horoscopes.rambler.ru/aquarius/')
    elif message.text.lower() == '‚ôì—Ä—ã–±—ã‚ôì':
        bot.send_message(message.chat.id, '–í–∞—à–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ –≥–æ—Ä–æ—Å–∫–æ–ø –¥–ª—è —Ä—ã–±:'
                         '\nhttps://horoscopes.rambler.ru/pisces/')
    else:
        try:
            city = message.text
            appid = '33344c7d0773f4f21362c8f74a8a665b'

            res = requests.get("http://api.openweathermap.org/data/2.5/weather",
                               params={'q': city, 'units': 'metric', 'lang': 'ru', 'APPID': appid})
            data = res.json()
            bot.send_message(message.chat.id, "–ì–æ—Ä–æ–¥: {}"
                                              "\n–ü–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è: {}"
                                              "\n–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: {}"
                                              "\n–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: {}"
                                              "\n–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: {}"
                                              "\n–°–∫–æ—Ä–æ—Å—Ç—å –≤–µ—Ç—Ä–∞: {}".format(city, data['weather'][0]['description'],
                                                                            data['main']['temp'],
                                                                            data['main']['temp_min'],
                                                                            data['main']['temp_max'],
                                                                            data['wind']['speed']))
        except:
            bot.send_message(message.chat.id, "–ò–∑–≤–∏–Ω–∏—Ç–µ, —è –í–∞—Å –Ω–µ –ø–æ–Ω—è–ª.")


bot.polling()
